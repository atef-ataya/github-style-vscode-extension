<svg width="1200" height="800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-family: Arial, sans-serif; font-size: 24px; font-weight: bold; fill: #2563eb; }
      .subtitle { font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; fill: #1e40af; }
      .label { font-family: Arial, sans-serif; font-size: 12px; fill: #374151; }
      .small-label { font-family: Arial, sans-serif; font-size: 10px; fill: #6b7280; }
      .component { fill: #dbeafe; stroke: #2563eb; stroke-width: 2; }
      .process { fill: #dcfce7; stroke: #16a34a; stroke-width: 2; }
      .api { fill: #fef3c7; stroke: #d97706; stroke-width: 2; }
      .data { fill: #f3e8ff; stroke: #7c3aed; stroke-width: 2; }
      .arrow { stroke: #374151; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .flow-arrow { stroke: #16a34a; stroke-width: 3; fill: none; marker-end: url(#greenarrow); }
      .api-arrow { stroke: #d97706; stroke-width: 2; fill: none; marker-end: url(#orangearrow); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#374151" />
    </marker>
    <marker id="greenarrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#16a34a" />
    </marker>
    <marker id="orangearrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#d97706" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="600" y="30" text-anchor="middle" class="title">GitHub Style Agent - Workflow Diagram</text>
  
  <!-- User Interface Layer -->
  <text x="50" y="70" class="subtitle">1. User Interface Layer</text>
  
  <!-- VS Code Extension -->
  <rect x="50" y="80" width="150" height="60" class="component" rx="5"/>
  <text x="125" y="100" text-anchor="middle" class="label">VS Code Extension</text>
  <text x="125" y="115" text-anchor="middle" class="small-label">extension.ts</text>
  <text x="125" y="130" text-anchor="middle" class="small-label">Command Registration</text>
  
  <!-- Webview Panel -->
  <rect x="250" y="80" width="150" height="60" class="component" rx="5"/>
  <text x="325" y="100" text-anchor="middle" class="label">Webview Panel</text>
  <text x="325" y="115" text-anchor="middle" class="small-label">webviewContent.ts</text>
  <text x="325" y="130" text-anchor="middle" class="small-label">Monaco Editor UI</text>
  
  <!-- Monaco Editor -->
  <rect x="450" y="80" width="150" height="60" class="component" rx="5"/>
  <text x="525" y="100" text-anchor="middle" class="label">Monaco Editor</text>
  <text x="525" y="115" text-anchor="middle" class="small-label">Code Display</text>
  <text x="525" y="130" text-anchor="middle" class="small-label">Syntax Highlighting</text>
  
  <!-- Core Engine Layer -->
  <text x="50" y="190" class="subtitle">2. Core Engine Layer</text>
  
  <!-- CodeStyleEngine -->
  <rect x="50" y="200" width="180" height="80" class="process" rx="5"/>
  <text x="140" y="220" text-anchor="middle" class="label">CodeStyleEngine</text>
  <text x="140" y="235" text-anchor="middle" class="small-label">Main Orchestrator</text>
  <text x="140" y="250" text-anchor="middle" class="small-label">• Repository Analysis</text>
  <text x="140" y="265" text-anchor="middle" class="small-label">• Code Generation</text>
  
  <!-- PatternAnalyzer -->
  <rect x="280" y="200" width="180" height="80" class="process" rx="5"/>
  <text x="370" y="220" text-anchor="middle" class="label">PatternAnalyzer</text>
  <text x="370" y="235" text-anchor="middle" class="small-label">Style Detection</text>
  <text x="370" y="250" text-anchor="middle" class="small-label">• Indentation Analysis</text>
  <text x="370" y="265" text-anchor="middle" class="small-label">• Quote/Semicolon Patterns</text>
  
  <!-- CodeGenerator -->
  <rect x="510" y="200" width="180" height="80" class="process" rx="5"/>
  <text x="600" y="220" text-anchor="middle" class="label">CodeGenerator</text>
  <text x="600" y="235" text-anchor="middle" class="small-label">AI Code Generation</text>
  <text x="600" y="250" text-anchor="middle" class="small-label">• Prompt Engineering</text>
  <text x="600" y="265" text-anchor="middle" class="small-label">• Style Application</text>
  
  <!-- Utility Layer -->
  <text x="50" y="320" class="subtitle">3. Utility Layer</text>
  
  <!-- ProgressTracker -->
  <rect x="50" y="330" width="150" height="60" class="data" rx="5"/>
  <text x="125" y="350" text-anchor="middle" class="label">ProgressTracker</text>
  <text x="125" y="365" text-anchor="middle" class="small-label">Real-time Updates</text>
  <text x="125" y="380" text-anchor="middle" class="small-label">Time Estimation</text>
  
  <!-- Type System -->
  <rect x="250" y="330" width="150" height="60" class="data" rx="5"/>
  <text x="325" y="350" text-anchor="middle" class="label">Type System</text>
  <text x="325" y="365" text-anchor="middle" class="small-label">TypeScript Definitions</text>
  <text x="325" y="380" text-anchor="middle" class="small-label">Interface Contracts</text>
  
  <!-- Enhanced Components -->
  <rect x="450" y="330" width="150" height="60" class="data" rx="5"/>
  <text x="525" y="350" text-anchor="middle" class="label">Enhanced UI</text>
  <text x="525" y="365" text-anchor="middle" class="small-label">Project Templates</text>
  <text x="525" y="380" text-anchor="middle" class="small-label">File Management</text>
  
  <!-- External Services -->
  <text x="50" y="440" class="subtitle">4. External Services</text>
  
  <!-- GitHub API -->
  <rect x="100" y="450" width="150" height="80" class="api" rx="5"/>
  <text x="175" y="470" text-anchor="middle" class="label">GitHub API</text>
  <text x="175" y="485" text-anchor="middle" class="small-label">@octokit/rest</text>
  <text x="175" y="500" text-anchor="middle" class="small-label">• Repository Access</text>
  <text x="175" y="515" text-anchor="middle" class="small-label">• File Content Retrieval</text>
  
  <!-- OpenAI API -->
  <rect x="300" y="450" width="150" height="80" class="api" rx="5"/>
  <text x="375" y="470" text-anchor="middle" class="label">OpenAI API</text>
  <text x="375" y="485" text-anchor="middle" class="small-label">GPT-4 Model</text>
  <text x="375" y="500" text-anchor="middle" class="small-label">• Code Generation</text>
  <text x="375" y="515" text-anchor="middle" class="small-label">• Context-Aware Prompts</text>
  
  <!-- Workflow Steps -->
  <text x="700" y="190" class="subtitle">5. Workflow Process</text>
  
  <!-- Step 1 -->
  <rect x="700" y="200" width="200" height="40" class="process" rx="5"/>
  <text x="800" y="215" text-anchor="middle" class="label">1. User Input</text>
  <text x="800" y="230" text-anchor="middle" class="small-label">GitHub Token, Username, Spec</text>
  
  <!-- Step 2 -->
  <rect x="700" y="250" width="200" height="40" class="process" rx="5"/>
  <text x="800" y="265" text-anchor="middle" class="label">2. Repository Discovery</text>
  <text x="800" y="280" text-anchor="middle" class="small-label">Fetch repos via GitHub API</text>
  
  <!-- Step 3 -->
  <rect x="700" y="300" width="200" height="40" class="process" rx="5"/>
  <text x="800" y="315" text-anchor="middle" class="label">3. Pattern Analysis</text>
  <text x="800" y="330" text-anchor="middle" class="small-label">Analyze code style patterns</text>
  
  <!-- Step 4 -->
  <rect x="700" y="350" width="200" height="40" class="process" rx="5"/>
  <text x="800" y="365" text-anchor="middle" class="label">4. Code Generation</text>
  <text x="800" y="380" text-anchor="middle" class="small-label">AI generates styled code</text>
  
  <!-- Step 5 -->
  <rect x="700" y="400" width="200" height="40" class="process" rx="5"/>
  <text x="800" y="415" text-anchor="middle" class="label">5. Result Delivery</text>
  <text x="800" y="430" text-anchor="middle" class="small-label">Display in Monaco Editor</text>
  
  <!-- Data Flow Section -->
  <text x="950" y="190" class="subtitle">6. Data Flow</text>
  
  <!-- Data Flow Steps -->
  <rect x="950" y="200" width="180" height="30" class="data" rx="3"/>
  <text x="1040" y="220" text-anchor="middle" class="small-label">User Credentials → Validation</text>
  
  <rect x="950" y="240" width="180" height="30" class="data" rx="3"/>
  <text x="1040" y="260" text-anchor="middle" class="small-label">GitHub API → Repository Data</text>
  
  <rect x="950" y="280" width="180" height="30" class="data" rx="3"/>
  <text x="1040" y="300" text-anchor="middle" class="small-label">File Content → Style Analysis</text>
  
  <rect x="950" y="320" width="180" height="30" class="data" rx="3"/>
  <text x="1040" y="340" text-anchor="middle" class="small-label">Style Profile → AI Prompt</text>
  
  <rect x="950" y="360" width="180" height="30" class="data" rx="3"/>
  <text x="1040" y="380" text-anchor="middle" class="small-label">OpenAI API → Generated Code</text>
  
  <rect x="950" y="400" width="180" height="30" class="data" rx="3"/>
  <text x="1040" y="420" text-anchor="middle" class="small-label">Formatted Code → UI Display</text>
  
  <!-- Connection Arrows -->
  
  <!-- UI Layer Connections -->
  <line x1="200" y1="110" x2="250" y2="110" class="arrow"/>
  <line x1="400" y1="110" x2="450" y2="110" class="arrow"/>
  
  <!-- Engine Layer Connections -->
  <line x1="125" y1="140" x2="125" y2="200" class="flow-arrow"/>
  <line x1="230" y1="240" x2="280" y2="240" class="arrow"/>
  <line x1="460" y1="240" x2="510" y2="240" class="arrow"/>
  
  <!-- Utility Connections -->
  <line x1="140" y1="280" x2="140" y2="330" class="arrow"/>
  <line x1="370" y1="280" x2="325" y2="330" class="arrow"/>
  <line x1="600" y1="280" x2="525" y2="330" class="arrow"/>
  
  <!-- API Connections -->
  <line x1="140" y1="280" x2="175" y2="450" class="api-arrow"/>
  <line x1="600" y1="280" x2="375" y2="450" class="api-arrow"/>
  
  <!-- Workflow Flow -->
  <line x1="800" y1="240" x2="800" y2="250" class="flow-arrow"/>
  <line x1="800" y1="290" x2="800" y2="300" class="flow-arrow"/>
  <line x1="800" y1="340" x2="800" y2="350" class="flow-arrow"/>
  <line x1="800" y1="390" x2="800" y2="400" class="flow-arrow"/>
  
  <!-- Data Flow Arrows -->
  <line x1="1040" y1="230" x2="1040" y2="240" class="flow-arrow"/>
  <line x1="1040" y1="270" x2="1040" y2="280" class="flow-arrow"/>
  <line x1="1040" y1="310" x2="1040" y2="320" class="flow-arrow"/>
  <line x1="1040" y1="350" x2="1040" y2="360" class="flow-arrow"/>
  <line x1="1040" y1="390" x2="1040" y2="400" class="flow-arrow"/>
  
  <!-- Progress Tracking -->
  <text x="50" y="580" class="subtitle">7. Progress Tracking Stages</text>
  
  <!-- Progress Stages -->
  <rect x="50" y="590" width="120" height="40" fill="#fef2f2" stroke="#dc2626" stroke-width="2" rx="5"/>
  <text x="110" y="605" text-anchor="middle" class="small-label">FETCHING</text>
  <text x="110" y="620" text-anchor="middle" class="small-label">Repository Discovery</text>
  
  <rect x="180" y="590" width="120" height="40" fill="#fef3c7" stroke="#d97706" stroke-width="2" rx="5"/>
  <text x="240" y="605" text-anchor="middle" class="small-label">ANALYZING</text>
  <text x="240" y="620" text-anchor="middle" class="small-label">Pattern Detection</text>
  
  <rect x="310" y="590" width="120" height="40" fill="#dbeafe" stroke="#2563eb" stroke-width="2" rx="5"/>
  <text x="370" y="605" text-anchor="middle" class="small-label">GENERATING</text>
  <text x="370" y="620" text-anchor="middle" class="small-label">AI Code Creation</text>
  
  <rect x="440" y="590" width="120" height="40" fill="#dcfce7" stroke="#16a34a" stroke-width="2" rx="5"/>
  <text x="500" y="605" text-anchor="middle" class="small-label">COMPLETE</text>
  <text x="500" y="620" text-anchor="middle" class="small-label">Result Delivery</text>
  
  <!-- Progress Flow -->
  <line x1="170" y1="610" x2="180" y2="610" class="flow-arrow"/>
  <line x1="300" y1="610" x2="310" y2="610" class="flow-arrow"/>
  <line x1="430" y1="610" x2="440" y2="610" class="flow-arrow"/>
  
  <!-- Error Handling -->
  <text x="600" y="580" class="subtitle">8. Error Handling & Recovery</text>
  
  <rect x="600" y="590" width="150" height="30" fill="#fef2f2" stroke="#dc2626" stroke-width="1" rx="3"/>
  <text x="675" y="610" text-anchor="middle" class="small-label">API Rate Limiting</text>
  
  <rect x="600" y="630" width="150" height="30" fill="#fef2f2" stroke="#dc2626" stroke-width="1" rx="3"/>
  <text x="675" y="650" text-anchor="middle" class="small-label">Network Timeouts</text>
  
  <rect x="600" y="670" width="150" height="30" fill="#fef2f2" stroke="#dc2626" stroke-width="1" rx="3"/>
  <text x="675" y="690" text-anchor="middle" class="small-label">Invalid Credentials</text>
  
  <rect x="770" y="590" width="150" height="30" fill="#dcfce7" stroke="#16a34a" stroke-width="1" rx="3"/>
  <text x="845" y="610" text-anchor="middle" class="small-label">Graceful Degradation</text>
  
  <rect x="770" y="630" width="150" height="30" fill="#dcfce7" stroke="#16a34a" stroke-width="1" rx="3"/>
  <text x="845" y="650" text-anchor="middle" class="small-label">Retry Mechanisms</text>
  
  <rect x="770" y="670" width="150" height="30" fill="#dcfce7" stroke="#16a34a" stroke-width="1" rx="3"/>
  <text x="845" y="690" text-anchor="middle" class="small-label">Safe Defaults</text>
  
  <!-- Recovery Arrows -->
  <line x1="750" y1="605" x2="770" y2="605" class="flow-arrow"/>
  <line x1="750" y1="645" x2="770" y2="645" class="flow-arrow"/>
  <line x1="750" y1="685" x2="770" y2="685" class="flow-arrow"/>
  
  <!-- Security Notes -->
  <text x="950" y="580" class="subtitle">9. Security Features</text>
  
  <rect x="950" y="590" width="180" height="25" fill="#f0fdf4" stroke="#16a34a" stroke-width="1" rx="3"/>
  <text x="1040" y="607" text-anchor="middle" class="small-label">🔒 No Persistent Storage</text>
  
  <rect x="950" y="620" width="180" height="25" fill="#f0fdf4" stroke="#16a34a" stroke-width="1" rx="3"/>
  <text x="1040" y="637" text-anchor="middle" class="small-label">🛡️ Content Security Policy</text>
  
  <rect x="950" y="650" width="180" height="25" fill="#f0fdf4" stroke="#16a34a" stroke-width="1" rx="3"/>
  <text x="1040" y="667" text-anchor="middle" class="small-label">🔐 Nonce-based Scripts</text>
  
  <rect x="950" y="680" width="180" height="25" fill="#f0fdf4" stroke="#16a34a" stroke-width="1" rx="3"/>
  <text x="1040" y="697" text-anchor="middle" class="small-label">🚫 No Sensitive Logging</text>
  
  <!-- Legend -->
  <text x="50" y="750" class="subtitle">Legend</text>
  
  <rect x="50" y="760" width="20" height="15" class="component"/>
  <text x="80" y="772" class="small-label">UI Components</text>
  
  <rect x="180" y="760" width="20" height="15" class="process"/>
  <text x="210" y="772" class="small-label">Core Logic</text>
  
  <rect x="300" y="760" width="20" height="15" class="api"/>
  <text x="330" y="772" class="small-label">External APIs</text>
  
  <rect x="420" y="760" width="20" height="15" class="data"/>
  <text x="450" y="772" class="small-label">Data/Utilities</text>
  
  <line x1="550" y1="767" x2="580" y2="767" class="flow-arrow"/>
  <text x="590" y="772" class="small-label">Process Flow</text>
  
  <line x1="680" y1="767" x2="710" y2="767" class="api-arrow"/>
  <text x="720" y="772" class="small-label">API Calls</text>
</svg>